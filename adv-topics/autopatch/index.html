
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AllStarLink Manual">
      
      
        <meta name="author" content="AllStarLink Team">
      
      
        <link rel="canonical" href="https://allstarlink.github.io/adv-topics/autopatch/">
      
      
        <link rel="prev" href="../hotspot_hd/">
      
      
        <link rel="next" href="../permissions/">
      
      
      <link rel="icon" href="../../assets/allstarlink.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Autopatch - AllStarLink Manual</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="allstarlink" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#autopatch" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AllStarLink Manual" class="md-header__button md-logo" aria-label="AllStarLink Manual" data-md-component="logo">
      
  <img src="../../assets/allstar-logo-small.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AllStarLink Manual
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Autopatch
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-guide/" class="md-tabs__link">
          
  
    
  
  Installation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-guide/menu/" class="md-tabs__link">
          
  
    
  
  Basic Operation

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../commands/" class="md-tabs__link">
          
  
    
  
  Advanced Topics

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developers/package-builds/" class="md-tabs__link">
          
  
    
  
  Developer Guide

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AllStarLink Manual" class="md-nav__button md-logo" aria-label="AllStarLink Manual" data-md-component="logo">
      
  <img src="../../assets/allstar-logo-small.png" alt="logo">

    </a>
    AllStarLink Manual
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../user-guide/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Installation
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ASL3 Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            ASL3 Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/whats-new/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's New?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/pi-detailed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Raspberry Pi Install
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debian 12 Install
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Updating ASL3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/known-issues-diffs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Differences & Issues
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Allmon3
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Allmon3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../allmon3/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../allmon3/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../allmon3/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../allmon3/usermgmt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Basic Operation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Basic Operation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/menu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ASL3 Menu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/asl-cmds-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ASL Commands and Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/passwords/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logins and Passwords
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ASL3 Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/betatest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Beta Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Troubleshooting Tips
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pi Appliance
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Pi Appliance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/cockpit-get-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/cockpit-basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cockpit Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/cockpit-console/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terminal / Console
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/cockpit-network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/cockpit-updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software Updates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/cockpit-services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Services Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/cockpit-firewall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing the Firewall
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Manpages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Manpages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mans/asl-find-sound/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asl-find-sound
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mans/asl-node-lookup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asl-node-lookup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mans/asl-play-arn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asl-play-arn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mans/asl-say/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asl-say
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mans/asl-setup-dkms-mok/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asl-setup-dkms-mok
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Advanced Topics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    New Commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../incompatibles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Incompatibilities with Legacy Versions &amp; Configs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../iaxreg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IAX-Based Registration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usbinterfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    USB Audio Interfaces
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sa818modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SA818 RF Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conftmpl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Asterisk Templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../httpreg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP Registration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../allowdenylists/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Allow and Deny Lists
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cloud-kernel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using AllStarLink/app_rpt with Cloud Kernels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other-software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other Software Products
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../audio-level/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Calibrating Audio Levels For The Allstar Link System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sip-phone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up a SIP Phone
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../broadcastify/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Streaming Node Audio to Broadcastify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hotspot_hd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hot Spot Unkey Delay
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Autopatch
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Autopatch
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#regulatory-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Regulatory Issues
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Security Issues
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#duplex-and-vox" class="md-nav__link">
    <span class="md-ellipsis">
      Duplex and VOX
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecting-a-voip-provider" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting a VOIP Provider
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#voip-provider-setup" class="md-nav__link">
    <span class="md-ellipsis">
      VOIP Provider Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#firewall-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Firewall Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-files" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modulesconf" class="md-nav__link">
    <span class="md-ellipsis">
      modules.conf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rptconf" class="md-nav__link">
    <span class="md-ellipsis">
      rpt.conf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rpt.conf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#autopatch-options" class="md-nav__link">
    <span class="md-ellipsis">
      Autopatch Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-script-to-handle-terminating-calls" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Script to Handle Terminating Calls
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensionsconf" class="md-nav__link">
    <span class="md-ellipsis">
      extensions.conf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iaxconf" class="md-nav__link">
    <span class="md-ellipsis">
      iax.conf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pjsipconf" class="md-nav__link">
    <span class="md-ellipsis">
      pjsip.conf
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simplex-autopatch" class="md-nav__link">
    <span class="md-ellipsis">
      Simplex Autopatch
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permissions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../noderesolution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node Resolution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../uefi-secureboot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UEFI and SecureBoot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ASL Text-to-Speech
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multinodesnetwork/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Nodes on the Same Network
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/package-builds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building ASL3-Asterisk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/source-install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Source-Based Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/aptly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AllStarLink Apt Repos
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="autopatch">Autopatch</h1>
<p>The autopatch feature in app_rpt allows users on the radio to interconnect with the public switched telephone network.  This means a HAM operator can dial a phone number from the radio and be connected to a phone.  The reverse is also possible with someone being able to dial a phone number and be connected to the node.  This is achieved using an account with a VOIP service provider and connecting the Allstar node.</p>
<h2 id="regulatory-issues">Regulatory Issues</h2>
<p><em>Some countries do not allow third-party traffic through autopatching or 
telephone interconnection on amateur radio frequencies. In addition, if a system 
is linked between one country which allows autopatching and one which doesn't, 
just the passing of the traffic itself across the link could be considered a 
violation of the rules in the prohibiting country. In countries which permit 
autopatching, users need be made aware of this and should take the node off-link 
before using the autopatch.</em></p>
<h2 id="security-issues">Security Issues</h2>
<p><em>The examples provided here do not secure the autopatch against toll fraud. A lot 
can be done to prevent or reduce toll fraud but the prevention measures vary by 
where you are located geographically. Most of the prevention measures will be in 
extensions.conf. You can write contexts to reject certain number sequences. 
The <a href="http://www.asteriskdocs.org/">asterisk book</a> should be consulted to see how to do 
this and you be done before placing any autopatch in service. Please make sure you have secured your system so that toll fraud does not become an issue.</em></p>
<h2 id="duplex-and-vox">Duplex and VOX</h2>
<p>Nodes with duplex set to 0 or 1 will use VOX automatically.  Nodes with duplex set to 2 or higher can use phone mode. In phone mode, one can key up the radio by dialing *99 and unkey by dialing #.  One can configure simplex autopatch to not use VOX, but simplex reverse autopatch must use VOX, so it is preferable to use VOX both ways for simplex nodes.  Nodes configured for VOX autopatch should advise callers to mute their phone and unmute only when talking.  Additional info can be found in the <a href="#simplex-autopatch">Simplex Autopatch</a> section.</p>
<h2 id="selecting-a-voip-provider">Selecting a VOIP Provider</h2>
<p>Call termination into the public switched telephone network is a service offered by
a Voice Over IP provider (VOIP). This is a highly competitive business, 
and there are lots of VOIP providers offering termination for Asterisk users. 
Termination is usually provided using the SIP protocol, while IAX is offered 
by a few providers.</p>
<p>When selecting an VOIP provider, make sure they provide setup instructions with 
example configurations including usernames, and passwords. Quite a few VOIPs will 
automatically generate a custom SIP or IAX stanza for insertion into sip.conf, 
or iax.conf respectively. Not all providers will supply configuration examples. 
This guide includes example configuration files that may need adjustments to get 
working with specific providers and ASL versions.</p>
<p>This guide will document the general process for setting up IAX2 and SIP providers with examples for voip.ms IAX and flowroute.com SIP.  Any provider should be setup in a similar fashion.</p>
<h2 id="voip-provider-setup">VOIP Provider Setup</h2>
<p>Whatever provider one chooses, the same things must be setup.  Different providers will have different names for each item but the setup will be similar.</p>
<ul>
<li>A phone number or DID must be purchased.</li>
<li>E911 service should be setup.</li>
<li>CallerID must be setup for the DID.</li>
<li>Inbound routing will need to be setup so calls are routed to the node via IAX2 or SIP.</li>
<li>Authentication for outbound calls must be configured.</li>
</ul>
<h2 id="firewall-setup">Firewall Setup</h2>
<ul>
<li>If using IAX, the firewall will already be configured properly. If using SIP, you will need to update the firewall rules to allow SIP traffic with:</li>
</ul>
<div class="highlight"><pre><span></span><code>root@localhost:/#<span class="w"> </span>firewall-cmd<span class="w"> </span>--add-service<span class="o">=</span>SIP<span class="w"> </span>--permanent
</code></pre></div>
<ul>
<li>On the router/firewall, forward/open ports as required:<ul>
<li>For traffic from IAX/SIP provider you need to allow TCP and UDP port 5060 to the node.</li>
<li>For traffic from WAN needs to allow the UDP port range 10000-20000 to the node.</li>
</ul>
</li>
</ul>
<h2 id="configuration-files">Configuration Files</h2>
<p>Four configuration files will be used to setup the autopatch: <strong>rpt.conf</strong>, 
<strong>extensions.conf</strong>, <strong>modules.conf</strong>, and either <strong>iax.conf</strong> or <strong>pjsip.conf</strong>. 
The VOIP provider should provide a stanza for you to insert in <strong>iax.conf</strong> 
or <strong>pjsip.conf</strong>. The configuration below shows how each of these files are 
used when an outgoing autopatch or reverse autopatch call is made.</p>
<h3 id="modulesconf">modules.conf</h3>
<p>In the <strong>/etc/asterisk/modules.conf</strong> file, add the following lines at the bottom of the file, but above the [global] stanza:</p>
<div class="highlight"><pre><span></span><code>load =&gt; bridge_builtin_features.so
load =&gt; bridge_builtin_interval_features.so
load =&gt; bridge_holding.so
load =&gt; bridge_native_rtp.so
load =&gt; bridge_simple.so
load =&gt; bridge_softmix.so
load =&gt; chan_bridge_media.so
load =&gt; app_verbose.so
load =&gt; app_read.so
</code></pre></div>
<p>If using a SIP trunking provider, add these additional lines at the bottom of 
modules.conf, above the [global] stanza:</p>
<div class="highlight"><pre><span></span><code>;
; modules for pjsip
;
noload = app_voicemail.so
load = bridge_builtin_features.so
load = bridge_builtin_interval_features.so
load = bridge_holding.so
load = bridge_native_rtp.so
load = bridge_simple.so
load = bridge_softmix.so
load = chan_bridge_media.so
load = chan_pjsip.so
load = func_pjsip_endpoint.so
load = func_sorcery.so
load = func_devstate.so
load = res_pjproject.so
load = res_pjsip_acl.so
load = res_pjsip_authenticator_digest.so
load = res_pjsip_caller_id.so
load = res_pjsip_dialog_info_body_generator.so
load = res_pjsip_diversion.so
load = res_pjsip_dtmf_info.so
load = res_pjsip_endpoint_identifier_anonymous.so
load = res_pjsip_endpoint_identifier_ip.so
load = res_pjsip_endpoint_identifier_user.so
load = res_pjsip_exten_state.so
load = res_pjsip_header_funcs.so
load = res_pjsip_logger.so
load = res_pjsip_messaging.so
load = res_pjsip_mwi_body_generator.so
load = res_pjsip_mwi.so
load = res_pjsip_nat.so
load = res_pjsip_notify.so
load = res_pjsip_one_touch_record_info.so
load = res_pjsip_outbound_authenticator_digest.so
load = res_pjsip_outbound_publish.so
load = res_pjsip_outbound_registration.so
load = res_pjsip_path.so
load = res_pjsip_pidf_body_generator.so
load = res_pjsip_pidf_digium_body_supplement.so
load = res_pjsip_pidf_eyebeam_body_supplement.so
load = res_pjsip_publish_asterisk.so
load = res_pjsip_pubsub.so
load = res_pjsip_refer.so
load = res_pjsip_registrar.so
load = res_pjsip_rfc3326.so
load = res_pjsip_sdp_rtp.so
load = res_pjsip_send_to_voicemail.so
load = res_pjsip_session.so
load = res_pjsip.so
noload = res_pjsip_t38.so
noload = res_pjsip_transport_websocket.so
load = res_pjsip_xpidf_body_generator.so
load = res_rtp_asterisk.so
load = res_sorcery_astdb.so
load = res_sorcery_config.so
load = res_sorcery_memory.so
load = res_sorcery_realtime.so
</code></pre></div>
<h3 id="rptconf">rpt.conf</h3>
<p>In the <strong>/etc/asterisk/rpt.conf</strong> configuration file, the stanza for the node needs to specify the context for the autopatch.  The name of the context should match the name added to extensions.conf:</p>
<p><div class="highlight"><pre><span></span><code>[1234]
context = autopatch                ; dialing context for phone
callerid = &quot;Repeater&quot; &lt;0000000000&gt; ; callerid for phone calls
accountcode = RADIO                ; account code (optional)
</code></pre></div>
You should also add entries to the function stanza so that users can bring up or take down the autopatch:</p>
<div class="highlight"><pre><span></span><code>[functions]
61 = autopatchup,noct=1,farenddisconnect=1,dialtime=20000,context=autopatch,quiet=1
0 = cmd,/var/lib/asterisk/hangupPhones ; Hangup all phone patches
</code></pre></div>
<h4 id="autopatch-options">Autopatch Options</h4>
<p>There are several options that can be passed to the autopatchup command class.  This table summarizes what they do:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>context</td>
<td>Override the context specified for the autopatch in rpt.conf</td>
</tr>
<tr>
<td>dialtime</td>
<td>The maximum time to wait between DTMF digits when a telephone number is being dialed. The patch will automatically disconnect if this time is exceeded. The value is specified in milliseconds.</td>
</tr>
<tr>
<td>farenddisconnect</td>
<td>When set to 1, the patch will automatically disconnect when the called party hangs up. The default is to send a circuit busy tone until the radio user brings the patch down.</td>
</tr>
<tr>
<td>noct</td>
<td>When set to 1, the courtesy tone during an autopatch call will be disabled. The default is to send the courtesy tone whenever the radio user unkeys.</td>
</tr>
<tr>
<td>quiet</td>
<td>When set to 1, do not send dial tone or voice responses, just try to connect the call.</td>
</tr>
<tr>
<td>voxalways</td>
<td>When set to 1, enables VOX mode.</td>
</tr>
<tr>
<td>exten</td>
<td>Overrides the default autopatch extension.</td>
</tr>
<tr>
<td>nostar</td>
<td>Disables the repeater function prefix</td>
</tr>
</tbody>
</table>
<h4 id="create-a-script-to-handle-terminating-calls">Create a Script to Handle Terminating Calls</h4>
<p>Create the following script to handle terminating calls. Without this script you will be unable to forcefully terminate <strong>incoming</strong> calls:</p>
<div class="highlight"><pre><span></span><code>nano<span class="w"> </span>/var/lib/asterisk/hangupPhones
</code></pre></div>
<p>Paste this script into the file:</p>
<div class="highlight"><pre><span></span><code>#!/bin/bash
# Target pattern to match (adjust as needed for different calls)
TARGET_PATTERN=&quot;IAX2/voipms-&quot;
# TARGET_PATTERN=&quot;PJSIP/flowroute-&quot;
# Get the list of channels and their concise details
CHANNELS=$(asterisk -rx &quot;core show channels concise&quot;)
echo &quot;Checking for matching channels...&quot;
echo &quot;--------------------------------&quot;
# Iterate over each line to find the target channel
while IFS= read -r line; do
    if [[ $line == $TARGET_PATTERN* ]]; then
        CHANNEL=$(echo &quot;$line&quot; | awk -F&#39;!&#39; &#39;{print $1}&#39;)
        CALLERID=$(echo &quot;$line&quot; | awk -F&#39;!&#39; &#39;{print $3}&#39;)
        echo &quot;Found matching channel: $CHANNEL with Caller ID: $CALLERID&quot;
        echo &quot;Hanging up channel: $CHANNEL&quot;
        asterisk -rx &quot;channel request hangup $CHANNEL&quot;
    fi
done &lt;&lt;&lt; &quot;$CHANNELS&quot;
</code></pre></div>
<p>Save the file and make it executable:</p>
<div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>+x<span class="w"> </span>/var/lib/asterisk/hangupPhones
</code></pre></div>
<h3 id="extensionsconf">extensions.conf</h3>
<p>In the <strong>/etc/asterisk/extensions.conf</strong> file, a stanza for the autopatch context is added which refers to the peer stanza in iax.conf or pjsip.conf.  These examples will likely need to be adjusted to work with a specific provider: </p>
<p>For outbound IAX connections, add an [autopatch] stanza with:</p>
<div class="highlight"><pre><span></span><code>[autopatch] 

; Match any 10-digit number (e.g., North American local format).
exten =&gt; _NXXNXXXXXX,1,Dial(IAX2/voipms/${EXTEN})
; After the call is completed, hang up the line.
exten =&gt; _NXXNXXXXXX,n,Hangup()
</code></pre></div>
<p>For outbound SIP connections (using IP auth), add and [autopatch] stanza with:</p>
<div class="highlight"><pre><span></span><code>[autopatch]

; Match any 10-digit number (e.g., North American local format).
exten =&gt; _NXXNXXXXXX,1,Dial(PJSIP/flowroute-endpoint/sip:[tech-prefix]*+1${EXTEN}@us-east-va.sip.flowroute.com)
; After the call is completed, hang up the line.
exten =&gt; _NXXNXXXXXX,n,Hangup()
</code></pre></div>
<p>To setup the 911 extension, add the following lines to the [autopatch] stanza:</p>
<div class="highlight"><pre><span></span><code>; Match 911
exten =&gt; 911,1,Dial(IAX2/voipms/${EXTEN})
; The Dial command routes the call through the IAX2 channel to the &quot;voipms&quot; trunk,
; passing the dialed number (${EXTEN}) to the provider.

; After the call is completed, hang up the line.
exten =&gt; 911,n,Hangup()

; Optional: Reroute 911 to another number
; Uncomment the following lines to enable this feature:
; Instead of routing 911 directly, reroute it to the specified number (e.g., 1234567890).
; This could be used to route emergency calls to a different service or internal security.
; exten =&gt; 911,1,Dial(IAX2/voipms/1234567890)
; After the rerouted call is completed, hang up the line.
; exten =&gt; 911,n,Hangup()
</code></pre></div>
<p>You will also want to add a [reverse-autopatch] stanza with the following lines:</p>
<div class="highlight"><pre><span></span><code>; REVERSE-AUTOPATCH - REPEATER RECEIVES INCOMING CALLS

[reverse-autopatch]
; Change below to the voip DID number
VOIPDID = 5555554321

exten =&gt; _X.,1,Verbose(1, Caller ${CALLERID(all)} has entered IVR menu)
; wait a bit before answering
exten =&gt; _X.,n,Wait(2)

; Answer the incoming call.
exten =&gt; _X.,n,Answer()

; Wait for 1 second to ensure the line is stable before playing the prompt.
exten =&gt; _X.,n,Wait(1)

; Optional: Bypass PIN for trusted caller
; Uncomment the below line to enable this feature:
; If the incoming call is from a trusted number (5551234567 or 5559876543 in this example),
; skip the PIN code and go directly to the &quot;${VOIPDID}&quot; label.
;exten =&gt; _X.,n,GotoIf($[&quot;${CALLERID(num)}&quot; = &quot;+15555551234&quot;]?5555554321,1)
; Example of how to &quot;trust&quot; two (or more) phone numbers
; exten =&gt; _X.,n,GotoIf($[&quot;${CALLERID(num)}&quot; = &quot;5551234567&quot; | &quot;${CALLERID(num)}&quot; = &quot;5559876543&quot;]?${VOIPDID},1)

; Initialize an attempt counter
exten =&gt; _X.,n,Set(ATTEMPTS=0)
; Play a message that asks the caller to enter their PIN followed by the pound/hash key, along with other information like mute/unmute procedure, ID with callsign, etc.
exten =&gt; _X.,n(start),Playback(message)

; Wait for the caller to enter a 4-digit PIN.
; - &quot;PIN&quot; is the variable where the entered digits will be stored.
; - &quot;beep&quot; will play a beep sound to prompt the user.
; - &quot;4&quot; specifies the PIN length (4 digits).
; - &quot;,,5&quot; sets a 5-second timeout for the user to start entering the PIN.
exten =&gt; _X.,n,Read(PIN,beep,4,,,5)

; SET YOUR PIN(s) HERE! THESE PIN(s) WILL BE USED TO PATCH INTO THE REPEATER
; Check if the entered PIN is one of the valid PINs.
; - If the PIN is correct, the call will go to the label &quot;wait-for-pound&quot;.
; - If not, it will continue to the next step.
exten =&gt; _X.,n,GotoIf($[&quot;${PIN}&quot; = &quot;1234&quot;]?wait-for-pound)
; Example of how to set up two (or more) PINs:
; exten =&gt; _X.,n,GotoIf($[&quot;${PIN}&quot; = &quot;1234&quot; | &quot;${PIN}&quot; = &quot;5678&quot;]?wait-for-pound)

; Increment the attempt counter
exten =&gt; _X.,n,Set(ATTEMPTS=$[${ATTEMPTS}+1])

; If the PIN is invalid, play a message saying it was incorrect.
; &quot;confbridge-invalid&quot; says: &quot;You have entered an invalid option.&quot;
exten =&gt; _X.,n,Playback(confbridge-invalid)

; Check if the attempt counter has reached 3
exten =&gt; _X.,n,GotoIf($[${ATTEMPTS} &gt;= 3]?too-many-failures)

; Go back to the start and ask the user to enter the PIN again.
; This gives the user another chance to enter a valid PIN.
exten =&gt; _X.,n,Goto(start)

; If the user fails to enter a valid PIN after 3 attempts, play a message saying they have entered too many invalid PINs.
; &quot;confbridge-pin-bad&quot; says: &quot;You have entered too many invalid personal identification numbers.&quot;
exten =&gt; _X.,n(too-many-failures),Playback(confbridge-pin-bad)

; Hang up the call after the failure message.
exten =&gt; _X.,n,Hangup()

; After the valid PIN is entered, wait for the user to press the &quot;#&quot; key.
; - This command waits for the user to press &quot;#&quot; to confirm the PIN entry.
; - The 5-second timeout will give the user time to press &quot;#&quot;.
exten =&gt; _X.,n(wait-for-pound),WaitExten(5)

; If the user presses &quot;#&quot;, go to the &quot;${VOIPDID}&quot; label.
exten =&gt; #,1,Goto(${VOIPDID},1)

; If &quot;#&quot; is not pressed, go to the start label.
exten =&gt; _X.,89,Goto(start)

; If the correct PIN was entered and &quot;#&quot; was pressed, play a message confirming the connection.
; &quot;rpt/connected&quot; could say something like: &quot;You are now connected.&quot;
exten =&gt; ${VOIPDID},1,Playback(rpt/connected)

; Connect the caller to the repeater using the &quot;rpt&quot; command.
; The &quot;|P&quot; option is used to specify &quot;phone&quot; mode in app_rpt.
exten =&gt; ${VOIPDID},n,rpt(${NODE}|Pv)

; Hang up the call after the connection is made.
exten =&gt; ${VOIPDID},n,Hangup()
</code></pre></div>
<h3 id="iaxconf">iax.conf</h3>
<p>If using an IAX provider, you will need to update the <strong>/etc/asterisk/iax.conf</strong> file.  Items in between brackets should be replaced with specific account info, except the stanza names themselves:</p>
<p>First, add the following lines to the [general] stanza :</p>
<div class="highlight"><pre><span></span><code>; ENTER YOUR VOIP.MS CREDENTIALS AND SERVER HERE
register =&gt; [VOIPMS_ID]:[VOIPMS_PASSWORD]@[VOIPMS_HOST]
; Example: register =&gt; 123456:supersecretpassword@dallas1.voip.ms
</code></pre></div>
<p>Then, add this new stanza :</p>
<div class="highlight"><pre><span></span><code>[voipms]
username=[VOIPMS_ID]; ENTER YOUR 6-DIGIT VOIP.MS USERNAME HERE
type=friend
context=reverse-autopatch
host=[VOIPMS_HOST]; ENTER THE VOIP.MS SERVER ADDRESS YOU SELECTED FOR YOUR DID HERE
secret=[VOIPMS_PASSWORD]; ENTER YOUR VOIP.MS IAX PASSWORD HERE
disallow=all
allow=ulaw
allow=g726aal2
allow=gsm
codecpriority=host
insecure=port,invite
requirecalltoken=yes
</code></pre></div>
<h3 id="pjsipconf">pjsip.conf</h3>
<p>If using a SIP provider, replace (or create) the <strong>/etc/asterisk/pjsip.conf</strong> file.  The file (below) is based on a node behind NAT and should be updated for specific providers and accounts:</p>
<div class="highlight"><pre><span></span><code>;===============TRANSPORT

[sip-trans]
type=transport
protocol=udp
bind=0.0.0.0
local_net=[LAN Network IP]/24
local_net=127.0.0.1/32
external_media_address=[INET IP]
external_signaling_address=[INET IP]

;===============TRUNK

[flowroute-reg]
type=registration
outbound_auth=flowroute-auth
server_uri=sip:us-east-va.sip.flowroute.com
client_uri=sip:[Tech Prefix]@us-east-va.sip.flowroute.com
retry_interval=60
contact_user=[VOIP DID]@[WAN IP]

[flowroute-auth]
type=auth
auth_type=userpass
password=[password]
username=[Tech Prefix]
;realm=us-west-or.sip.flowroute.com

[flowroute-aor]
type=aor
contact=sip:[WAN IP]:5060

[flowroute-endpoint]
type=endpoint
context=reverse-autopatch
disallow=all
allow=ulaw
allow=g726aal2
allow=alaw
allow=gsm
;outbound_auth=flowroute-auth
aors=flowroute-aor
;outbound_proxy = sip:us-west-or.sip.flowroute.com
from_domain=[WAN IP]

[flowroute-id]
type=identify
endpoint=flowroute-endpoint
match=us-east-va.sip.flowroute.com
</code></pre></div>
<h2 id="simplex-autopatch">Simplex Autopatch</h2>
<p>For nodes with duplex set to 0 or 1, Simplex Autopatch operation is supported.
This is accomplished by using a VOX on the audio coming from the telephone call, 
because of the half-duplex nature of the node. To avoid having audio from the 
telephone call keep the transmitter engaged for extended periods of time (if there 
is some source of continuous audio), there are two time-out values. </p>
<p>Vox timeout, which is the maximum amount of time that the VOX can hold the transmitter 
engaged, which by default is 10 seconds. The other one is the VOX recovery time, which
is the amount of time that the VOX is disabled during times of continuous audio, after
the VOX timeout, which is 2 seconds. During continuous audio, it transmits for 
10 seconds, then stops for 2 seconds (so that you can transmit to it and perhaps 
disconnect the call), then transmits for another 10 seconds, then stops for 2 seconds.
This repeats until the call is disconnected.</p>
<p>Additionally, to prevent 'chop-off' of the first syllable or two of the audio from the 
telephone call, the audio is delayed to allow for the transmitter to start transmitting 
and any CTCSS tones to be decoded. This delay is typically 500ms, but can be adjusted
using the 'simplexpatchdelay' parameter. It is specified in units of 20 milliseconds.</p>
<p>These time-out values may be overridden by using the following configuration parameters
located in the [node-number] section of rpt.conf:</p>
<div class="highlight"><pre><span></span><code>[1999]
voxtimeout = 10000     ; VOX timeout time in ms
voxrecover = 2000      ; VOX recover time in ms
simplexpatchdelay = 25 ; Delay for transmit while in patch in 20ms increments
simplexphonedelay = 25 ; Delay for phone while in patch for 20ms increments
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../hotspot_hd/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Hot Spot Unkey Delay">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Hot Spot Unkey Delay
              </div>
            </div>
          </a>
        
        
          
          <a href="../permissions/" class="md-footer__link md-footer__link--next" aria-label="Next: Permissions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Permissions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 AllStarLink Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://www.allstarlink.org/" target="_blank" rel="noopener" title="AllStarLink Home" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6 31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5 50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0 27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/AllStarLink" target="_blank" rel="noopener" title="AllStarLink on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            





  

<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" checked>
<div class="md-consent__settings">
  <ul class="task-list">
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>